---
defaults:
  - scope:
      path: ""
      type: posts
    values:
      layout: single
      author_profile: true
      comments: true
      share: true
      related: true

title: "[DL Basic] Quant Trading"
excerpt: "about : Quant Trading"
toc: true
toc_sticky: true
toc_label: "Label"
categories:
  - AI
tags:
  - [Trading, AI]
date: 2021-09-23
last_modified_at: 2021-09-23
---

<br>

# Quant Trading

<br>

## 퀀트 트레이딩이란?

- 투자(investment)는 장기간 트레이딩(trading)은 상대적으로 단기간
- 단기적인 가격변화에서 이득을 봄
- 짧게는 몇 분, 몇 초에서 길어야 3일 정도 보유
- Quantitative(계량적) trading
- 모델 기반 혹은 데이터 기반으로 접근
- 모델 기반 : 가격이 특정 수학적 성질을 가진다고 가정
- 데이터 기반 : 시장의 과거 데이터에서 분포를 추정)

<br><br><br>

## 퀀트 트레이디의 스펙트럼

- 포지션을 얼마나 오래 유지하는가?(1초 미만, ~3분, ~시간, ~하루, ~3일)
- 어떤 상품군을 거래하는가?(주식, 선물, 옵션, 채권, 외환, 암호화폐...)
- 100% 자동화 되었는가, 혹은 트레이더의 주관이 들어가는가?
- 주문 집행 vs 자체 수익
- 어디에서 엣지가 오는가(시장의 특성을 이용? 훌륭한 통계적 모델?)

<br><br><br>

## 퀀트 트레이딩 예시

<br>

### Arbitrage

- 하나의 상품이 여러 곳에서 거래될때, 싼 곳에서 사서 비싼 곳에서 파는 방법
- Arbitrage(아비트러지)는 같은 상품의 가격을 맞춰주는 역할을 함
- 개념적으로 간단하기 떄문에 속도 경쟁이 치열(90% 속도(몇 ms) + 10% 알파(스마트한 정도, 방법론적 측면) 경쟁)

<br><br>

### market making

- 매수(구입) 주문과 매도(판매) 주문을 동시에 냄
- 두 주문이 동시에 체결되면 두 주문의 가격차 만큼 이득
- 유동성을 공급함(누구나 거래하고 싶을 때 쉽게 사고 팔 수 있게함)
- 모든 사람이 일제히 한 방향으로 거래하게 될 경우 한 쪽으로 가격이 움직이며 손해가 발생함
- 50% 속도(수 분, 수 초내), 50% 알파 경쟁

<br><br>

### statistical arbitrage

- 미래 가격의 변화를 예측해서 거래하는 방법
- 최근 호가 움직임을 이용한 가격 예측
- 정보의 출처는 중요하지 않음(펀더멘털, 기술적 지표 모두 사용 가능)
- 데이터 기반 접근법이 필수
- 10% 속도, 90% 알파

<br><br><br>

## 퀀트 트레이딩 플레이어

<br>

### 퀀트 헤지 펀드/로보 어드바이저

- 고객의 자본(수천억 ~ 수십조)을 운영하고 운용자금과 이익의 일부를 보수로 받음
- 상대적으로 긴 보유기간을 갖음

<br><br>

### 프랍 트레이딩(자기 자본 거래)

- 회사 파트너들의 자본(수십 ~ 수백억)을 거래
- 규모가 작은 대신 대개 HFT나 Market making을 통해 높은 이익률을 추구
- 성공적인 팀은 꾸준히 연간 100% 이상의 수익률을 냄
→ 금융위기 이후 규제 변경으로 은행들은 자기자본 거래를 하지 않음, 퀀트 기반 트레이딩 서비스를 제공하는 쪽에 초점


![image](https://user-images.githubusercontent.com/77658029/134514510-d6ae1218-2e5c-4237-ae66-a18d6e618d41.png)

<br><br><br>

## 이게 정말 될까?

- 효율적 시장 가설(Eugene Fama)
    + 가격은 상품에 대한 모든 정보를 포함하고 있기 때문에 장기적으로 초과수익을 얻을 수는 없다
- 안된다는 증거와 썰들은 많지만,,
- 예측 범위(Horizon)에 따라 다르지만 미래를 예상할 수 있는 다양한 이유가 있음
    + 포지션이 큰 참가자들은 움직이는 데 오래 걸림
    + 큰 가격 변화가 있을 때 군중 심리가 나타남
    + 프로페셔널 참가자들은 리스크를 줄이는 합리적 행동을 함
    + 새로운 정보(뉴스, 공시 정보, 매출 및 펀더멘털)가 시장에 반영되기까지는 시간이 걸림
    + 기술적인 문제들 : 거래소/종목의 특성, 특정 규칙에 따라 움직여야하는 참가자들
    + 거래량이 많은 상품이나 거래소가 가격 발견 과정을 선도함
    + 상품에 대한 새로운 정보가 가격에 포함되기 위해서는 누군가 거래를 해야함

<br><br>

### **🚨 성공의 기준이 우리의 직관과 다름**

- 5분 후 가격 변화를 예측하는 6개의 forcast가 있을때, 어느 정도가 현실적으로 가능하고, 어느정도 되었을때 돈을 벌 수 있을까?

![image](https://user-images.githubusercontent.com/77658029/134520304-61080619-f685-4a37-8690-e10c7c098a39.png)

💡 위 3개가 현실적으로 예측 가능하고, 돈을 벌 수도 있음!

- 만약 10%정도 넘게 나오면 baseline에 bug가 있다고 생각함

<br><br>

### 0.01%의 수익

- 엄청나게 작은 예측들로 수천개의 종목을 하루에 수만번씩 베팅
- 각 베팅에 성공할 확률이 51%만 되어도, 수백만번 반복하면 이론값이 수렴(대수의 법칙, 카지노)
- HFT도 거래당 평균 수익도 0.01%
- 이것으로 연수익 100%를 내기 위해선 엄청나게 많은 양을 꾸준히 거래해야함

<br><br><br>

## 왜 딥러닝을 안할까?

- 시장에 영향을 미치는 수많은 원인 중 우리가 아는 부분은 극히 일부분
- 시장의 변동성
    + 가만히 있으면 모델이점점 나빠짐
    + 규제 조건의 변동
    + 새로운 시장 및 상품군의 출현

- 다른 문제와 비교
    + 이미지 인식 : 고양이는 시간이 지나도 고양이
    + 바둑 AI : 바둑 규칙은 변하지 않음
    + NLP : 언어는 빠르게 변화하지만 그 요체는 변하지 않음
    
- 가격 예측 문제를 이미지 인식과 비교하자면?
    + 터 한가닥만보고 어떤 동물인지 알아내기
    + 개와 고양이의 기준을 종종 정부가 바꿈
    + 고양이들이 분류를 피하기 위해 털의 모양을 바꿈
    
- 문제가 어렵다 =  오버피팅의 위험이 크다
    + 인샘플 에러를 낮추는건 쉬움
    + 기존 데이터 셋 내에서 완벽하게 오버피팅을 막았더라도, 미래에도 동일하게 동작할지 장담 할 수 없음

<br><br><br>

## 그럼 어떤 리서치를 하는가?

![image](https://user-images.githubusercontent.com/77658029/134604491-9fbb5a0e-da21-4e56-8bb5-8a380fd26778.png)

- 대부분의 리서치는 가설로 시작함
- 설등력 있는 가설이 없이 시작된 리서치는 결론이 조금만 안 좋아도 끝나기 쉬움
- 학습된 모델의 형태나 성능으로부터 점진적으로 더 나은 가설을 얻기도 함

<br><br>

### 리서치 과정 : 오렌지

- 퀀트 트레이딩 회사들은 굉장히 다양한 데이터를 구입해 사용
    + 거래시세, 공시자료, 뉴스, 트위터, 인공위성사진 ...
    
- 어떻게 데이터에서 엑기스를 골라낼 것인가?
    + 필터링, 노이즈 제거, 클리핑, outlier 감지, 데이터 정규화(normalization), 리그레션 정규화

<br><br>

### 리서치 과정 : 쥬서기

- 어떤 알고리즘이 내가 가진 가설을 가장 잘 표현할 수 있을까?
- 내가 최적화하고 있는 목적함수가 정말 적절할까?
- 기존에 공개된 코드를 그대로 사용하기엔 데이터가 너무 많은데 어떻게 스케일링 해야 할까?

<br><br>

### 리서치 과정 : 쥬서기 이후 - Monetization

- 어떤 거래소에서 거래를 할지?
- 어떤 주문 타입을 쓸까?
- 어떻게 포트폴리오를 관리해야 출렁임 없이 꾸준한 성능을 낼 수 있을까?
- 어떻게 하면 내 알파와 포지션을 노출하지 않고 거래를 할 수 있을까?
- 어떻게 하면 내 트레이딩이 시장에 미치는 영향을 최소화할 수 있을까?
- 시뮬레이터와 현실 세계의 차이는 어떻게 감안할까?

<br><br>

### 리서치 과정 

- 지난하고 반복적인 과정
- 새로운 아이디어 -> 시뮬레이션 -> 버그 -> 안됨 -> 무한 반복
- 효율적으로 가설을 검증하고 확인할 수 있는 플랫폼에 대한 투자가 중요

<br><br><br>

## 마무리

-  리서치 과정의 느린 피드백에 익숙해지는 과정이 필요
- 내가 푸는 문제에 대해 결국 깊이 이해 필요
- 잘 만들어진 알고리즘에 내 데이터를 꾸겨넣는 것만으로는 성공할 수 없음

<br><br><br>

## 퀀트 트레이딩 일을 하려면

- 국내에도 관련 회사가 많음
    - 트레이딩 스타트업, 전통적인 증권사 프랍 데스크, 로보어드바이저, 핀테크 스타트업, ..
- 국외
    - 아시아는 주로 홍콩/싱가폴, 유럽은 런던, 미국은 뉴욕/시카고
- 일할 곳을 찾으실 때는
    - 플랫폼과 프로세스에 투자를 열심히 하고
    - 내부적으로 연구 결과와 자료를 많이 공개하는 분위기의 회사가 좋겠어요

<br><br><br>

**📌reference**
- boostcourse AI tech

<br>

```
💡 수정 필요한 내용은 댓글이나 메일로 알려주시면 감사하겠습니다!💡 
```
